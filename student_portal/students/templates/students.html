{% extends 'base.html'%}

{% block content %}
<h1>Students List</h1>

<form method="get" class="form">
    <input
        type="text"
        name="search"
        placeholder="Search by name"
        value="{{query | default:''}}"
    >
    <button class="btn">Search</button>
</form>
<table class="table">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Age</th>
        <th>Course</th>
        <th>Marks</th>
        {% if user.is_staff %}
        <th>Actions</th>
        {% endif %}
    </tr>

    {% for student in students %}
    <tr>
        <td>{{student.id}}</td>
        <td>{{student.name}}</td>
        <td>{{student.age}}</td>
        <td>{{student.course}}</td>
        <td>{{student.marks}}</td>
        <td>
            {% if user.is_staff %}
            <a class="btn" href="/edit/{{student.id}}">Edit</a>
            <a class="btn" href="/delete/{{student.id}}" onclick="return confirm('Delete this student?');">Delete</a>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>

<div class="pagination">
    {% if students.has_previous %}
        <a href="?page=1">First</a>
        <a href="?page={{ students.previous_page_number }}">Previous</a>
    {% endif %}

    <span>Page {{ students.number }} of {{ students.paginator.num_pages }}</span>

    {% if students.has_next %}
        <a href="?page={{ students.next_page_number }}">Next</a>
        <a href="?page={{ students.paginator.num_pages }}">Last</a>
    {% endif %}

</div>
{% endblock %}